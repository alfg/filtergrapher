(function(e){function t(t){for(var r,s,o=t[0],l=t[1],u=t[2],f=0,c=[];f<o.length;f++)s=o[f],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&c.push(i[s][0]),i[s]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);h&&h(t);while(c.length)c.shift()();return n.push.apply(n,u||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(r=!1)}r&&(n.splice(t--,1),e=s(s.s=a[0]))}return e}var r={},i={index:0},n=[];function s(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=r,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(a,r,function(t){return e[t]}.bind(null,r));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/filtergrapher/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var h=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"21ed":function(e,t,a){"use strict";a("4322")},4322:function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),i=a("5f5b"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-navbar",{attrs:{type:"dark",variant:"dark"}},[a("div",{staticClass:"container"},[a("b-navbar-nav",[a("b-nav-item",{attrs:{href:"#"}},[e._v(" Filtergrapher ")])],1)],1)]),a("div",{staticClass:"container",attrs:{id:"app"}},[a("b-alert",{attrs:{variant:"warning",size:"sm",show:""}},[a("span",{staticClass:"font-weight-bold"},[e._v("Experimental")]),e._v(": Please use Google Chrome or Microsoft Edge. ")]),a("hr"),a("File")],1),a("footer",{staticClass:"container mt-4 text-center"},[a("hr"),a("div",{staticClass:"text-muted"},[a("ul",[a("li",[e._v(e._s(e.name)+"-"+e._s(e.version))]),e._m(0),e._m(1)])])])],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",[a("a",{attrs:{href:"https://github.com/alfg/filtergrapher"}},[e._v("Source")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",[a("a",{attrs:{href:"https://github.com/alfg/filtergrapher/issues"}},[e._v("Report Bugs")])])}],o=a("9224"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"file"},[a("b-form-row",[a("b-col",[a("b-form-group",{attrs:{label:"Select a file","label-for":"file"}},[a("b-input-group",[a("b-form-select",{staticClass:"protocol",model:{value:e.protocol,callback:function(t){e.protocol=t},expression:"protocol"}},e._l(e.protocols,(function(t){return a("option",{key:t.id,domProps:{value:t.value}},[e._v(e._s(t.name))])})),0),"file"===e.protocol?a("b-form-file",{attrs:{id:"file",accept:".mp4, .mkv",state:Boolean(e.file),placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},on:{change:e.onFile},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}}):e._e(),"url"===e.protocol?a("b-form-input",{attrs:{state:Boolean(e.url),placeholder:"Enter a URL"},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}}):e._e(),"example"===e.protocol?a("b-form-select",{scopedSlots:e._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("-- Please select an option --")])]},proxy:!0}],null,!1,1780735698),model:{value:e.url,callback:function(t){e.url=t},expression:"url"}},e._l(e.examples,(function(t){return a("option",{key:t.id,domProps:{value:t.value}},[e._v(e._s(t.name))])})),0):e._e(),"file"!==e.protocol?a("b-input-group-append",[a("b-button",{on:{click:e.onDownload}},[e._v("Download")])],1):e._e()],1)],1)],1)],1),e.showProgress?a("b-progress",{staticClass:"mb-2",attrs:{height:"2px",value:e.progress,max:"100"}}):e._e(),e.data?a("div",[e.file?a("div",[e._v(e._s(e.file?e.file.name+": "+e.file.size+" bytes":""))]):a("div",[e._v("URL: "+e._s(e.url?e.url+" ("+e.size+" bytes)":""))]),a("hr"),a("b-form-group",{attrs:{label:"Filter","label-for":"filter"}},[a("b-input-group",[a("b-form-input",{attrs:{placeholder:"Input a filter"},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),a("b-input-group-append",[a("b-button",{on:{click:e.onRender}},[e._v("Apply")])],1)],1)],1),a("b-form-group",{attrs:{label:"Timestamp:","label-for":"timestamp"}},[a("b-input",{staticClass:"float-left col-2",on:{change:e.onTimestampChange},model:{value:e.timestamp,callback:function(t){e.timestamp=t},expression:"timestamp"}}),a("b-input",{attrs:{id:"timestamp",type:"range",min:"0",max:e.data.duration},on:{change:e.onTimestampChange},model:{value:e.timestamp,callback:function(t){e.timestamp=t},expression:"timestamp"}})],1),a("b-form-group",{attrs:{label:"Frame"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.ariaDescribedby;return[a("b-form-radio-group",{attrs:{options:e.frames,"aria-describedby":r,name:"plain-inline",plain:""},on:{change:e.onFrameChange},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})]}}],null,!1,2991551631)}),e.img?a("img",{attrs:{src:e.img,width:"100%"}}):e._e()],1):e._e()],1)},u=[],h=(a("4de4"),a("d4ec")),f=a("bee2"),c=(a("ac1f"),a("466d"),a("d3b7"),a("25f0"),a("a15b"),a("1276"),function(){function e(t){Object(h["a"])(this,e),this._data=t,this._parser=null,this._formatter=null,this.width=null,this.height=null,this.init()}return Object(f["a"])(e,[{key:"init",value:function(){var e=/^(\S+)\s+(#.*?\n)*\s*(\d+)\s+(\d+)\s+(\d+)?\s*/,t=this._data.match(e);if(!t)throw new TypeError("Not a Netpbm file.");var a=this.width=parseInt(t[3],10),r=this.height=parseInt(t[4],10),i=parseInt(t[5],10),n=i<256?1:2,s=this._data.substr(t[0].length);switch(t[1]){case"P1":this._parser=new d(i+" "+s,n),this._formatter=new _(a,r);break;case"P2":this._parser=new d(s,n),this._formatter=new g(a,r,i);break;case"P3":this._parser=new d(s,n),this._formatter=new m(a,r,i);break;case"P4":this._parser=new p(s,n),this._formatter=new _(a,r);break;case"P5":this._parser=new p(s,n),this._formatter=new g(a,r,i);break;case"P6":this._parser=new p(s,n),this._formatter=new m(a,r,i);break;default:throw new TypeError("Format not supported: ",t[1])}}},{key:"getPNG",value:function(){var e=this._formatter.getCanvas(this._parser);return e.toDataURL()}}]),e}()),p=function(){function e(t,a){Object(h["a"])(this,e),this._data=t,this._bytes=a,this._pointer=0}return Object(f["a"])(e,[{key:"getNextSample",value:function(){if(this._pointer>=this._data.length)return!1;for(var e=0,t=0;t<this._bytes;t++)e=255*e+this._data.charCodeAt(this._pointer++);return e}}]),e}(),d=function(){function e(t,a){Object(h["a"])(this,e),this._data=t,this._bytes=a,this._pointer=0}return Object(f["a"])(e,[{key:"getNextSample",value:function(){if(this._pointer>=this._data.length)return!1;for(var e=0,t=0;t<this._bytes;t++)e=255*e+parseInt(this._data[this._pointer++],10);return e}}]),e}(),m=function(){function e(t,a,r){Object(h["a"])(this,e),this._width=t,this._height=a,this._maxVal=r}return Object(f["a"])(e,[{key:"getCanvas",value:function(e){var t,a=document.createElement("canvas"),r=a.getContext("2d");a.width=r.width=this._width,a.height=r.height=this._height,t=r.getImageData(0,0,this._width,this._height);for(var i=0;i<this._height;i++)for(var n=0;n<this._width;n++){var s=255/this._maxVal,o=s*e.getNextSample(),l=s*e.getNextSample(),u=s*e.getNextSample(),h=4*(i*this._width+n);t.data[h]=o,t.data[h+1]=l,t.data[h+2]=u,t.data[h+3]=255}return r.putImageData(t,0,0),a}}]),e}(),g=function(){function e(t,a,r){Object(h["a"])(this,e),this._width=t,this._height=a,this._maxVal=r}return Object(f["a"])(e,[{key:"getCanvas",value:function(e){var t,a=document.createElement("canvas"),r=a.getContext("2d");a.width=r.width=this._width,a.height=r.height=this._height,t=r.getImageData(0,0,this._width,this._height);for(var i=0;i<this._height;i++)for(var n=0;n<this._width;n++){var s=e.getNextSample()*(255/this._maxVal),o=4*(i*this._width+n);t.data[o]=s,t.data[o+1]=s,t.data[o+2]=s,t.data[o+3]=255}return r.putImageData(t,0,0),a}}]),e}(),_=function(){function e(t,a){Object(h["a"])(this,e),this._width=t,this._height=a}return Object(f["a"])(e,[{key:"getCanvas",value:function(e){var t,a=document.createElement("canvas"),r=a.getContext("2d");if(e instanceof p){for(var i,n="",s=Math.ceil(this._width/8),o=0;o<this._height;o++){for(var l=e._data.substr(o*s,s),u="",h=0;h<l.length;h++)u+=("0000000"+l.charCodeAt(h).toString(2)).substr(-8);n+=u.substr(0,this._width)}while(!1!==(i=e.getNextSample()))n+=("0000000"+i.toString(2)).substr(-8);e=new d(n.split("").join(" "),1)}a.width=r.width=this._width,a.height=r.height=this._height,t=r.getImageData(0,0,this._width,this._height);for(var f=0;f<this._height;f++)for(var c=0;c<this._width;c++){var m=255*(1-e.getNextSample()),g=4*(f*this._width+c);t.data[g]=m,t.data[g+1]=m,t.data[g+2]=m,t.data[g+3]=255}return r.putImageData(t,0,0),a}}]),e}(),b=c,v={name:"File",components:{},computed:{frames:function(){for(var e=[],t=0;t<this.data.frames.length;t++)e.push({text:this.data.frames[t].frame_number,value:this.data.frames[t].frame_number});return e}},data:function(){return{protocols:[{name:"File",value:"file"},{name:"URL",value:"url"},{name:"Example",value:"example"}],examples:[{name:"Video Counter (10min, unfragmented, AVC Baseline, 3.38 MB)",value:"https://video-examples-public.s3.us-west-2.amazonaws.com/video_counter_10min_unfragmented_avc.mp4"},{name:"Tears of Steel 360p (00:12:14, unfragmented, AVC Baseline, 67.85 MB)",value:"https://video-examples-public.s3.us-west-2.amazonaws.com/tears-of-steel-360p.mp4"}],protocol:"file",file:null,url:null,size:null,data:null,tabIndex:0,progress:0,showProgress:!1,img:null,filter:"eq=contrast=1.75:brightness=0.20",selected:1,timestamp:0}},methods:{onFile:function(e){var t=this;this.$worker.onmessage=function(e){t.data=e.data,t.renderImage(e.data.file)},this.file=e.dataTransfer?e.dataTransfer.files[0]:e.target.files[0],this.$worker.postMessage(["run_filter",this.file,this.filter,parseInt(this.timestamp)])},onDownload:function(){var e=this;this.showProgress=!0,this.$worker.onmessage=function(t){e.data=t.data,e.renderImage(t.data.file)};var t=new XMLHttpRequest;t.onprogress=function(t){t.lengthComputable&&(e.progress=parseInt(t.loaded/t.total*100,10))},t.onload=function(t){e.progress=100,e.file=new File([t.target.response],"file"),e.size=e.file.size,e.$worker.postMessage(["run_filter",e.file,e.filter,0]),setTimeout((function(){e.showProgress=!1}),2e3)},t.open("GET",this.url,!0),t.responseType="blob",t.send()},renderImage:function(e){var t=this,a=new Blob([e]),r=new FileReader;r.onload=function(e){var a=e.target.result,r=new b(a);t.img=r.getPNG()},r.readAsBinaryString(a)},onRender:function(){var e=this;this.$worker.onmessage=function(t){e.data=t.data,e.renderImage(t.data.file)},this.$worker.postMessage(["run_filter",this.file,this.filter,parseInt(this.timestamp)])},onFrameChange:function(e){var t=this;this.$worker.onmessage=function(e){t.renderImage(e.data)},this.$worker.postMessage(["load_frame",this.file,e])},onTimestampChange:function(e){var t=this;this.$worker.onmessage=function(e){t.data=e.data,t.renderImage(e.data.file)},this.$worker.postMessage(["run_filter",this.file,this.filter,parseInt(e)])}}},w=v,x=(a("21ed"),a("2877")),k=Object(x["a"])(w,l,u,!1,null,"b3fd26d4",null),y=k.exports,C={name:"App",components:{File:y},data:function(){return{name:o["a"],version:o["b"]}}},O=C,j=(a("034f"),Object(x["a"])(O,n,s,!1,null,null,null)),P=j.exports,S=(a("f9e3"),a("2dd8"),new Worker("worker.js"));r["default"].prototype.$worker=S,r["default"].use(i["a"]),r["default"].config.productionTip=!1,new r["default"]({render:function(e){return e(P)}}).$mount("#app")},"85ec":function(e,t,a){},9224:function(e){e.exports=JSON.parse('{"a":"filtergrapher","b":"0.1.0"}')}});
//# sourceMappingURL=index.d52ab5ef.js.map